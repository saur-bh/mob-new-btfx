# Shared Login Flow
# This flow handles the login process with API keys

appId: com.bitfinex.bfxdev
name: "Login Flow"
description: "Perform login with API key and secret"
---
# Navigate to sign in
- tapOn: "Sign in"

# Wait for login screen to load
- waitForAnimationToEnd

# Take a screenshot to see what's available
- takeScreenshot: "login_form.png"

# Tap on API Key option (works for both iOS and Android)
- tapOn:
    text: "API Key.*"
    optional: true

# Wait for API key input screen
- waitForAnimationToEnd

# Tap on API key input field (iOS and Android compatible)
- tapOn:
    id: ".*input.*"
    optional: true
- tapOn:
    id: ".*Login-Public-Key-Input.*"
    optional: true

# Input API Key from test data
- inputText: ${output.bitfinex.apiKey}

# Tap on Secret key input field
- tapOn:
    id: ".*secret.*"
    optional: true
- tapOn:
    id: ".*Login-Secret-Key-Input.*"
    optional: true

# Input Secret Key from test data
- inputText: ${output.bitfinex.secretKey}

# Submit login
- tapOn:
    text: ".*[Ll]ogin.*"
    optional: true
- tapOn:
    text: ".*[Cc]ontinue.*"
    optional: true
